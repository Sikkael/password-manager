{"version":3,"sources":["../../src/__tests__/openapi-client.test.ts"],"names":["test","f","jsonSchemas","models","swaggerOptions","openApiOptions","transformSpec","basePath","listen","client","DefaultApi","Configuration","fetchApi","require","getTodoItems","resolves","toEqual","todoItems","postTodoItem","schemaTodoItem","id","label","state","SchemaTodoItemState","Todo","dueDateMs","Date","getTime","close"],"mappings":";;AAAA;;AAKA;;AAEA;;AAEA;;AACA;;AAEAA,IAAI,CAAE,gBAAF,EAAmB,YAAY;AACjC,QAAMC,CAAC,GAAG,8BACR,EADQ,EAER;AACEC,IAAAA,WAAW,EAAE,wBAAiBC,cAAjB,EAAyB,EAAzB,CADf;AAEEC,IAAAA,cAAc,EAAE,EACd,GAAGC,sBADW;AAEdC,MAAAA,aAAa,EAAE;AAFD;AAFlB,GAFQ,CAAV;AAWA,QAAMC,QAAQ,GAAG,MAAMN,CAAC,CAACO,MAAF,CAAS,CAAT,CAAvB;;AAEA,MAAI;AACF,UAAMC,MAAM,GAAG,IAAIC,uCAAJ,CACb,IAAIC,0CAAJ,CAAkB;AAAEJ,MAAAA,QAAF;AAAYK,MAAAA,QAAQ,EAAEC,OAAO,CAAE,YAAF;AAA7B,KAAlB,CADa,CAAf;AAIA,UAAM,8BAAQJ,MAAM,CAACK,YAAP,EAAR,EAA+BC,QAA/B,CAAwCC,OAAxC,CAAgD;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAAhD,CAAN;AAEA,UAAM,8BACJR,MAAM,CAACS,YAAP,CAAoB;AAClBC,MAAAA,cAAc,EAAE;AACdC,QAAAA,EAAE,EAAG,sCADS;AAEdC,QAAAA,KAAK,EAAG,MAFM;AAGdC,QAAAA,KAAK,EAAEC,iDAAoBC,IAHb;AAIdC,QAAAA,SAAS,EAAE,IAAIC,IAAJ,CAAS,IAAT,EAAeC,OAAf;AAJG;AADE,KAApB,CADI,EASJZ,QATI,CASKC,OATL,CASa;AACjBC,MAAAA,SAAS,EAAE,CACT;AACEG,QAAAA,EAAE,EAAG,sCADP;AAEEC,QAAAA,KAAK,EAAG,MAFV;AAGEC,QAAAA,KAAK,EAAEC,iDAAoBC,IAH7B;AAIEC,QAAAA,SAAS,EAAE,IAAIC,IAAJ,CAAS,IAAT,EAAeC,OAAf;AAJb,OADS;AADM,KATb,CAAN;AAmBD,GA1BD,SA0BU;AACR,UAAM1B,CAAC,CAAC2B,KAAF,EAAN;AACD;AACF,CA3CG,CAAJ","sourcesContent":["import {\n  Configuration,\n  DefaultApi,\n  SchemaTodoItemState,\n} from \"fastify-zod-test-openapi-client\";\nimport { tExpect } from \"typed-jest-expect\";\n\nimport { buildJsonSchemas } from \"..\";\n\nimport { models } from \"./models.fixtures\";\nimport { createTestServer, openApiOptions } from \"./server.fixtures\";\n\ntest(`openapi-client`, async () => {\n  const f = createTestServer(\n    {},\n    {\n      jsonSchemas: buildJsonSchemas(models, {}),\n      swaggerOptions: {\n        ...openApiOptions,\n        transformSpec: {},\n      },\n    },\n  );\n\n  const basePath = await f.listen(0);\n\n  try {\n    const client = new DefaultApi(\n      new Configuration({ basePath, fetchApi: require(`node-fetch`) }),\n    );\n\n    await tExpect(client.getTodoItems()).resolves.toEqual({ todoItems: [] });\n\n    await tExpect(\n      client.postTodoItem({\n        schemaTodoItem: {\n          id: `e7f7082a-4f16-430d-8c3b-db6b8d4d3e73`,\n          label: `todo`,\n          state: SchemaTodoItemState.Todo,\n          dueDateMs: new Date(1337).getTime(),\n        },\n      }),\n    ).resolves.toEqual({\n      todoItems: [\n        {\n          id: `e7f7082a-4f16-430d-8c3b-db6b8d4d3e73`,\n          label: `todo`,\n          state: SchemaTodoItemState.Todo,\n          dueDateMs: new Date(1337).getTime(),\n        },\n      ],\n    });\n  } finally {\n    await f.close();\n  }\n});\n"],"file":"openapi-client.test.js"}