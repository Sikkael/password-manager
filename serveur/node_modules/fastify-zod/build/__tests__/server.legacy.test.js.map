{"version":3,"sources":["../../src/__tests__/server.legacy.test.ts"],"names":["test","f","expect","inject","method","url","then","res","json","resolves","toEqual","todoItems","payload","error","message","statusCode","id","label","state","dueDateMs","Date","getTime"],"mappings":";;AAAA;;AAEAA,IAAI,CAAE,eAAF,EAAkB,YAAY;AAChC,QAAMC,CAAC,GAAG,0CAAuB,EAAvB,EAA2B,EAA3B,EAA+B,EAA/B,CAAV;AAEA,QAAMC,MAAM,CACVD,CAAC,CACEE,MADH,CACU;AACNC,IAAAA,MAAM,EAAG,KADH;AAENC,IAAAA,GAAG,EAAG;AAFA,GADV,EAKGC,IALH,CAKSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EALjB,CADU,CAAN,CAOJC,QAPI,CAOKC,OAPL,CAOa;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAPb,CAAN;AASA,QAAMT,MAAM,CACVD,CAAC,CACEE,MADH,CACU;AACNC,IAAAA,MAAM,EAAG,MADH;AAENC,IAAAA,GAAG,EAAG,OAFA;AAGNO,IAAAA,OAAO,EAAE;AAHH,GADV,EAMGN,IANH,CAMSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EANjB,CADU,CAAN,CAQJC,QARI,CAQKC,OARL,CAQa;AACjBG,IAAAA,KAAK,EAAG,aADS;AAEjBC,IAAAA,OAAO,EAAG,yCAFO;AAGjBC,IAAAA,UAAU,EAAE;AAHK,GARb,CAAN;AAcA,QAAMb,MAAM,CACVD,CAAC,CACEE,MADH,CACU;AACNC,IAAAA,MAAM,EAAG,MADH;AAENC,IAAAA,GAAG,EAAG,OAFA;AAGNO,IAAAA,OAAO,EAAE;AACPI,MAAAA,EAAE,EAAE;AADG;AAHH,GADV,EAQGV,IARH,CAQSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EARjB,CADU,CAAN,CAUJC,QAVI,CAUKC,OAVL,CAUa;AACjBG,IAAAA,KAAK,EAAG,aADS;AAEjBC,IAAAA,OAAO,EAAG,oCAFO;AAGjBC,IAAAA,UAAU,EAAE;AAHK,GAVb,CAAN;AAgBA,QAAMb,MAAM,CACVD,CAAC,CACEE,MADH,CACU;AACNC,IAAAA,MAAM,EAAG,MADH;AAENC,IAAAA,GAAG,EAAG,OAFA;AAGNO,IAAAA,OAAO,EAAE;AACPI,MAAAA,EAAE,EAAG,sCADE;AAEPC,MAAAA,KAAK,EAAG,MAFD;AAGPC,MAAAA,KAAK,EAAG,MAHD;AAIPC,MAAAA,SAAS,EAAE,IAAIC,IAAJ,CAAS,IAAT,EAAeC,OAAf;AAJJ;AAHH,GADV,EAWGf,IAXH,CAWSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAXjB,CADU,CAAN,CAaJC,QAbI,CAaKC,OAbL,CAaa;AACjBC,IAAAA,SAAS,EAAE,CACT;AACEK,MAAAA,EAAE,EAAG,sCADP;AAEEC,MAAAA,KAAK,EAAG,MAFV;AAGEC,MAAAA,KAAK,EAAG,MAHV;AAIEC,MAAAA,SAAS,EAAE,IAAIC,IAAJ,CAAS,IAAT,EAAeC,OAAf;AAJb,KADS;AADM,GAbb,CAAN;AAwBA,QAAMnB,MAAM,CACVD,CAAC,CACEE,MADH,CACU;AACNC,IAAAA,MAAM,EAAG,KADH;AAENC,IAAAA,GAAG,EAAG;AAFA,GADV,EAKGC,IALH,CAKSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EALjB,CADU,CAAN,CAOJC,QAPI,CAOKC,OAPL,CAOa;AACjBG,IAAAA,KAAK,EAAG,aADS;AAEjBC,IAAAA,OAAO,EAAG,sCAFO;AAGjBC,IAAAA,UAAU,EAAE;AAHK,GAPb,CAAN;AAYD,CA9EG,CAAJ","sourcesContent":["import { createLegacyTestServer } from \"./server.legacy.fixtures\";\n\ntest(`server.legacy`, async () => {\n  const f = createLegacyTestServer({}, {}, {});\n\n  await expect(\n    f\n      .inject({\n        method: `get`,\n        url: `/item`,\n      })\n      .then((res) => res.json()),\n  ).resolves.toEqual({ todoItems: [] });\n\n  await expect(\n    f\n      .inject({\n        method: `post`,\n        url: `/item`,\n        payload: {},\n      })\n      .then((res) => res.json()),\n  ).resolves.toEqual({\n    error: `Bad Request`,\n    message: `body should have required property 'id'`,\n    statusCode: 400,\n  });\n\n  await expect(\n    f\n      .inject({\n        method: `post`,\n        url: `/item`,\n        payload: {\n          id: 1337,\n        },\n      })\n      .then((res) => res.json()),\n  ).resolves.toEqual({\n    error: `Bad Request`,\n    message: `body.id should match format \"uuid\"`,\n    statusCode: 400,\n  });\n\n  await expect(\n    f\n      .inject({\n        method: `post`,\n        url: `/item`,\n        payload: {\n          id: `e7f7082a-4f16-430d-8c3b-db6b8d4d3e73`,\n          label: `todo`,\n          state: `todo`,\n          dueDateMs: new Date(1337).getTime(),\n        },\n      })\n      .then((res) => res.json()),\n  ).resolves.toEqual({\n    todoItems: [\n      {\n        id: `e7f7082a-4f16-430d-8c3b-db6b8d4d3e73`,\n        label: `todo`,\n        state: `todo`,\n        dueDateMs: new Date(1337).getTime(),\n      },\n    ],\n  });\n\n  await expect(\n    f\n      .inject({\n        method: `put`,\n        url: `/item/1337`,\n      })\n      .then((res) => res.json()),\n  ).resolves.toEqual({\n    error: `Bad Request`,\n    message: `params.id should match format \"uuid\"`,\n    statusCode: 400,\n  });\n});\n"],"file":"server.legacy.test.js"}